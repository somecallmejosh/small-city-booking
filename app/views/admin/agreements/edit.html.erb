<% content_for :title, "Edit Agreement â€” Admin" %>

<div class="mb-6">
  <%= render BreadcrumbComponent.new(items: [
    { label: "Admin", path: admin_root_path },
    { label: "Agreement", path: admin_agreement_path },
    { label: "Edit", path: nil }
  ]) %>
  <h1 class="mt-1 text-2xl font-semibold text-stone-900">Publish New Agreement Version</h1>
</div>

<div class="mb-4">
  <%= render FlashMessageComponent.new(type: :alert, message: "Saving will publish a new version immediately. Existing bookings are not affected.") %>
</div>

<div class="<%= card %>">
  <%= form_with url: admin_agreement_path, method: :patch, scope: :agreement, class: "space-y-4" do |f| %>
    <div>
      <label class="block text-sm font-medium text-stone-700 mb-1">Agreement body</label>
      <%= f.rich_text_area :body,
            value: @agreement&.body,
            class: "block w-full rounded-lg border border-stone-300 bg-white text-sm text-stone-900 focus:border-stone-500 focus:outline-none focus:ring-1 focus:ring-stone-500" %>
    </div>

    <div class="flex items-center gap-3 pt-2">
      <%= f.submit "Publish New Version", class: "#{btn_primary} cursor-pointer" %>
      <%= link_to "Cancel", admin_agreement_path, class: btn_secondary %>
    </div>
  <% end %>
</div>
